---
layout: post
title: Spring MVC
---
# Spring MVC

***Spring MVC*** is Web framework based on Model/View/Controller pattern.

- POJO programming
- Testable components
- Uses Spring for configuration
- Supports a wide range of server-side rendering: JSP, XSLT, PDF, Excel, FreeMarker, Thymeleaf, Groovy Markup, Mustache ...
- Basis for Spring's REST support

```text
             +----------+
             |   View   |
             | Resolver |
             +----------+
                |    ^
                |    |
           view |    | consult
                |    |
                v    |
 request   +--------------+ dispatch request    +------------+
+--------->|              |---------------->  +------------+ |
           |  Dispatcher  |                   |            | |
 response  |  Servlet     |     MODEL         | Controller | |
<----------|              |<------------------|            +-+
           +--------------+ logical view name +------------+
               ^   |
               |   |MODEL
               |   v
            +---------+
            |  View   |
            +---------+
```

- DispatcherServlet
  - Coordinates all request handling activities
  - Delegates to Web infrastructure beans
  - Invokes user Web components
  - Fully customizable

- `WebApplicationContext`, web specific application context
  - offer two more scopes:
    - Session
    - Request
  - contains web beans:
    - controllers
    - views
    - resolvers
  - contains application beans

- Controllers typically return a 'logical view name' String.
- The DispatcherServlet delegates to a ViewResolver to obtain View implementation based on view name.
- ViewResolvers select View based on view name. Many resolvels avaliable:
  - `InternalResourceViewResolver` for JSP/JSTL, `ThymeleafViewResolver`, `FreemarkerViewResolver`, `GroovyMarkupViewResolver`, `MustacheViewResolver`
- A View renders web output.

```java
@Controller
public class AccountController {


    // http://localhost:8080/listAccounts
    @GetMapping("/listAccounts")
    public String list(Model model, HttpSession session, HttpServletRequest request) {
        //...
        return "viewLogicalName";
    }

    // http://localhost:8080/showAccount.htm?entityId=123
    @GetMapping("/showAccount")
    public String show(@RequestParam("entityId") long id, Model model) {
        // Do something
    }

    // http://localhost:8080/accounts/123
    @GetMapping("/accounts/{accountId}")
    public String show(@PathVariable("accountId") long id, Model model) {
        // Do something
    }

    //  http://.../accounts/1234?overdrawn=true
    @GetMapping("/accounts/{accountId}")
    public String show(@PathVariable long accountId, @RequestParam boolean overdrawn, Model model) {
        // Compile with javac -parameters (JDK 8+)
        // Do something
    }

    //  http://.../orders/1234/items/2
    @GetMapping("/orders/{id}/items/{itemId}")
    public String show(@PathVariable(“id”) Long orderId, @PathVariable int itemId, Model model, Locale locale,
                    @RequestHeader(“user-agent”) String agent ) {
        // Do something
    }

    // http://.../orders?orderId=1234&item=2
    @GetMapping("/orders")
    public String show(@RequestParam Long orderId, @RequestParam(“item”) int itemId, Principal user,
                       Map<String,Object> model, HttpSession session ) {
        // Do something
    }
}
```